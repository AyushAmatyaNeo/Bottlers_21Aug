CREATE OR REPLACE TRIGGER HRIS_EMPLOYEE_PENALTY_TRG AFTER
  DELETE OR
  INSERT ON HRIS_EMPLOYEE_PENALTY_DAYS FOR EACH ROW DECLARE V_LEAVE_ID HRIS_LEAVE_MASTER_SETUP.LEAVE_ID%TYPE;
  BEGIN
    IF DELETING THEN
      SELECT LEAVE_ID
      INTO V_LEAVE_ID
      FROM
        (SELECT *
        FROM HRIS_EMPLOYEE_LEAVE_ASSIGN
        WHERE EMPLOYEE_ID=:old.EMPLOYEE_ID
        ORDER BY BALANCE DESC
        )
      WHERE ROWNUM =1 ;
      UPDATE HRIS_EMPLOYEE_LEAVE_ASSIGN
      SET BALANCE       = BALANCE+0.5
      WHERE EMPLOYEE_ID = :old.EMPLOYEE_ID
      AND LEAVE_ID      = V_LEAVE_ID;
    END IF;
    IF INSERTING THEN
      SELECT LEAVE_ID
      INTO V_LEAVE_ID
      FROM
        (SELECT *
        FROM HRIS_EMPLOYEE_LEAVE_ASSIGN
        WHERE EMPLOYEE_ID=:new.EMPLOYEE_ID
        ORDER BY BALANCE DESC
        )
      WHERE ROWNUM =1 ;
      UPDATE HRIS_EMPLOYEE_LEAVE_ASSIGN
      SET BALANCE       = BALANCE-0.5
      WHERE EMPLOYEE_ID = :new.EMPLOYEE_ID
      AND LEAVE_ID      = V_LEAVE_ID;
    END IF;
  EXCEPTION
  WHEN no_data_found THEN
    NULL;
  END;