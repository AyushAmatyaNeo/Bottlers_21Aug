create or replace TRIGGER HRIS_AFTER_LEAVE_REQUEST AFTER
  UPDATE ON HRIS_EMPLOYEE_LEAVE_REQUEST FOR EACH ROW DECLARE V_BALANCE NUMBER(3,1);
  BEGIN
    IF :new.STATUS ='AP' THEN
      IF(:new.HALF_DAY            IN ('F','S')) THEN
        V_BALANCE:= :new.NO_OF_DAYS/2;
      ELSE
        V_BALANCE:= :new.NO_OF_DAYS;
      END IF;
      UPDATE HRIS_EMPLOYEE_LEAVE_ASSIGN
      SET BALANCE       = BALANCE -V_BALANCE
      WHERE EMPLOYEE_ID = :new.EMPLOYEE_ID
      AND LEAVE_ID      =:new.LEAVE_ID;
    END IF ;
    
  END;