  ALTER TABLE HRIS_TRAINING_MASTER_SETUP MODIFY
  TRAINING_TYPE CHAR(2 BYTE) CHECK (TRAINING_TYPE IN ('CC','CP'));
    
    
  ALTER TABLE HRIS_TRAINING_MASTER_SETUP MODIFY
  TRAINING_TYPE CHECK (TRAINING_TYPE IN ('CC','CP'));

-- done on jwl_hris_apr5
DROP TABLE HRIS_EMPLOYEE_TRAINING_REQUEST;
CREATE TABLE "HRIS_EMPLOYEE_TRAINING_REQUEST"
  (
    "REQUEST_ID"          NUMBER(7,0) PRIMARY KEY,
    "REQUESTED_DATE"      DATE DEFAULT SYSDATE NOT NULL,
    "EMPLOYEE_ID"         NUMBER(7,0),
    "TRAINING_ID"         NUMBER(7,0),
    "TITLE"               VARCHAR2(255 BYTE),
    "DESCRIPTION"         VARCHAR2(255 BYTE),
    "TRAINING_TYPE"       CHAR(2 BYTE) CHECK (TRAINING_TYPE IN ('CC','CP')),
    "START_DATE"          DATE,
    "END_DATE"            DATE,
    "STATUS"              VARCHAR2(2 BYTE) NOT NULL CHECK (STATUS IN ('RQ','R','RC','AP','C')),
    "RECOMMENDED_BY"      NUMBER(7,0),
    "RECOMMENDED_DATE"    DATE,
    "RECOMMENDED_REMARKS" VARCHAR2(255 BYTE),
    "APPROVED_BY"         NUMBER(7,0),
    "APPROVED_DATE"       DATE,
    "APPROVED_REMARKS"    VARCHAR2(255 BYTE),
    "MODIFIED_DATE"       DATE,
    "REMARKS"             VARCHAR2(255 BYTE),
    "DURATION"            NUMBER(7,0)
  ) ;

-- done on jwl_hris_apr5
CREATE TABLE "HRIS_HOLIDAY_DESIGNATION"
  (
    "DESIGNATION_ID" NUMBER(7,0),
    "HOLIDAY_ID"     NUMBER(7,0)
  ) ;

-- done on jwl_hris_apr5
ALTER TABLE HRIS_LEAVE_MASTER_SETUP
ADD MAX_ACCUMULATE_DAYS NUMBER(7,0);

-- NOT DONE || SOMKALA PACHHAI || 26 APRIL
CREATE TABLE HRIS_FORGOT_PWD_DTL(
  EMPLOYEE_ID   NUMBER(7,0) NOT NULL,
  CODE          NUMBER(6,0) NOT NULL,
  EXPIRY_DATE   TIMESTAMP NOT NULL
);
ALTER TABLE HRIS_FORGOT_PWD_DTL ADD CONSTRAINT FK_FORGOT_PWD_DTL_EMP_EMP_ID FOREIGN KEY(EMPLOYEE_ID) REFERENCES HRIS_EMPLOYEES(EMPLOYEE_ID);


-- NOT DONE || UKESH || 1 MAY
ALTER TABLE HRIS_EMPLOYEES 
ADD IS_ADMIN CHAR(1 BYTE) DEFAULT 'N' NOT NULL CHECK(IS_ADMIN IN ('Y','N'));

-- NOT DONE || SOMKALA PACHHAI || MAY 1 

--NEO_HRIS | SOMKALA PACHHAI | MAY 1 2017
CREATE TABLE HRIS_OVERTIME
  (
    OVERTIME_ID         NUMBER(7,0) NOT NULL,
    EMPLOYEE_ID         NUMBER(7,0) NOT NULL,
    OVERTIME_DATE       DATE NOT NULL,
    REQUESTED_DATE      DATE NOT NULL,
    DESCRIPTION         VARCHAR2(255 BYTE) NOT NULL,
    REMARKS             VARCHAR2(255 BYTE),
    STATUS              VARCHAR2(2 BYTE) CHECK(STATUS IN ('RQ','RC','AP','C','R')),
    RECOMMENDED_BY      NUMBER(7,0),
    RECOMMENDED_DATE    DATE,
    RECOMMENDED_REMARKS VARCHAR2(255 BYTE),
    APPROVED_BY         NUMBER(7,0),
    APPROVED_DATE       DATE,
    APPROVED_REMARKS    VARCHAR2(255 BYTE),
    MODIFIED_DATE       DATE
  );
  
  
ALTER TABLE HRIS_OVERTIME ADD CONSTRAINT PK_OVERTIME_OVERTIME_ID PRIMARY KEY(OVERTIME_ID);

ALTER TABLE HRIS_OVERTIME ADD CONSTRAINT FK_OVERTIME_EMP_EMP_ID FOREIGN KEY(EMPLOYEE_ID)
REFERENCES HRIS_EMPLOYEES(EMPLOYEE_ID);

ALTER TABLE HRIS_OVERTIME ADD CONSTRAINT FK_OVERTIME_EMP_EMP_ID1 FOREIGN KEY(APPROVED_BY)
REFERENCES HRIS_EMPLOYEES(EMPLOYEE_ID);

ALTER TABLE HRIS_OVERTIME ADD CONSTRAINT FK_OVERTIME_EMP_EMP_ID2 FOREIGN KEY(RECOMMENDED_BY)
REFERENCES HRIS_EMPLOYEES(EMPLOYEE_ID);

CREATE TABLE HRIS_OVERTIME_DETAIL(
    DETAIL_ID           NUMBER(7,0) NOT NULL,
    OVERTIME_ID         NUMBER(7,0) NOT NULL,
    START_TIME          TIMESTAMP NOT NULL,
    END_TIME            TIMESTAMP NOT NULL,
    STATUS              CHAR(1 BYTE) CHECK(STATUS IN ('E','D')),
    CREATED_BY          NUMBER(7,0),
    CREATED_DATE        DATE,
    MODIFIED_BY         NUMBER(7,0),
    MODIFIED_DATE       DATE
);
ALTER TABLE HRIS_OVERTIME_DETAIL ADD CONSTRAINT PK_OVRTIME_DTL_DETAIL_ID PRIMARY KEY(DETAIL_ID);
ALTER TABLE HRIS_OVERTIME_DETAIL ADD CONSTRAINT FK_OVRTIME_DTL_OVRTIME_OVR_ID FOREIGN KEY(OVERTIME_ID) REFERENCES HRIS_OVERTIME(OVERTIME_ID);
ALTER TABLE HRIS_OVERTIME_DETAIL ADD CONSTRAINT FK_OVRTIME_DTL_EMP_EMP_ID FOREIGN KEY(CREATED_BY) REFERENCES HRIS_EMPLOYEES(EMPLOYEE_ID);
ALTER TABLE HRIS_OVERTIME_DETAIL ADD CONSTRAINT FK_OVRTIME_DTL_EMP_EMP_ID2 FOREIGN KEY(MODIFIED_BY) REFERENCES HRIS_EMPLOYEES(EMPLOYEE_ID);
ALTER TABLE HRIS_OVERTIME_DETAIL
ADD TOTAL_HOUR FLOAT
---


ALTER TABLE HRIS_EMPLOYEE_ADVANCE_REQUEST ADD VOUCHER_NO VARCHAR2(20 BYTE) ;

ALTER TABLE HRIS_LEAVE_MASTER_SETUP DROP COLUMN DEFAULT_DAYS;
ALTER TABLE HRIS_LEAVE_MASTER_SETUP ADD DEFAULT_DAYS NUMBER(3) DEFAULT 1 NOT NULL ;

--NOT DONE(JDI) | SOMKALA PACHHAI | 3rd May 2017
CREATE TABLE HRIS_SERVICE_QA
  (
    QA_ID              NUMBER(7,0) NOT NULL,
    PARENT_QA_ID       NUMBER(7,0),
    SERVICE_EVENT_TYPE_ID   NUMBER(7,0),
    QUESTION_EDESC     VARCHAR2(300 BYTE) NOT NULL,
    QUESTION_NDESC     VARCHAR2(800 BYTE) DEFAULT NULL,
    REMARKS            VARCHAR2(255 BYTE) DEFAULT NULL,
    STATUS             CHAR(1 BYTE) CHECK( STATUS IN ('D','E')),
    COMPANY_ID         NUMBER(7,0),
    BRANCH_ID          NUMBER(7,0),
    CREATED_BY         NUMBER(7,0),
    CREATED_DATE       DATE DEFAULT SYSDATE,
    MODIFIED_BY        NUMBER(7,0),
    MODIFIED_DATE      DATE,
    CHECKED            VARCHAR2(1 BYTE) DEFAULT 'N',
    APPROVED_BY        NUMBER(7,0),
    APPROVED_DATE      DATE,
    APPROVED           VARCHAR2(1 BYTE) DEFAULT 'N'
  );
  
  ALTER TABLE HRIS_SERVICE_QA ADD CONSTRAINT PK_SERVICE_QA PRIMARY KEY(QA_ID);
  ALTER TABLE HRIS_SERVICE_QA ADD CONSTRAINT UNQ_SERVICE_QA UNIQUE (QUESTION_EDESC,SERVICE_EVENT_TYPE_ID,COMPANY_ID);
  ALTER TABLE HRIS_SERVICE_QA ADD CONSTRAINT FK_SRV_QA_SRV_EVT_SRV_EVT_ID FOREIGN KEY(SERVICE_EVENT_TYPE_ID)
  REFERENCES HRIS_SERVICE_EVENT_TYPES(SERVICE_EVENT_TYPE_ID);
  ALTER TABLE HRIS_SERVICE_QA ADD CONSTRAINT FK_SRV_QA_COM_COM_ID FOREIGN KEY(COMPANY_ID)
  REFERENCES HRIS_COMPANY(COMPANY_ID);
  ALTER TABLE HRIS_SERVICE_QA ADD CONSTRAINT FK_SRV_QA_BRN_BRN_ID FOREIGN KEY(BRANCH_ID) REFERENCES HRIS_BRANCHES(BRANCH_ID);
  ALTER TABLE HRIS_SERVICE_QA ADD CONSTRAINT FK_SRV_QA_EMP_EMP_ID FOREIGN KEY(CREATED_BY) REFERENCES HRIS_EMPLOYEES(EMPLOYEE_ID);
  ALTER TABLE HRIS_SERVICE_QA ADD CONSTRAINT FK_SRV_QA_EMP_EMP_ID2 FOREIGN KEY(MODIFIED_BY) REFERENCES HRIS_EMPLOYEES(EMPLOYEE_ID);
  ALTER TABLE HRIS_SERVICE_QA ADD CONSTRAINT FK_SRV_QA_EMP_EMP_ID3 FOREIGN KEY(APPROVED_BY) REFERENCES HRIS_EMPLOYEES(EMPLOYEE_ID);


  
CREATE TABLE HRIS_EMPLOYEE_SERVICE_QA
  (
    EMP_QA_ID          NUMBER(7,0) NOT NULL,
    EMPLOYEE_ID        NUMBER(7,0) NOT NULL,
    QA_ID              NUMBER(7,0) NOT NULL,
    QA_DATE            DATE NOT NULL,
    ANSWER             VARCHAR2(800 BYTE) NOT NULL,
    REMARKS            VARCHAR2(255 BYTE) DEFAULT NULL,
    STATUS             CHAR(1 BYTE) CHECK( STATUS IN ('D','E')),
    COMPANY_ID         NUMBER(7,0),
    BRANCH_ID          NUMBER(7,0),
    CREATED_BY         NUMBER(7,0),
    CREATED_DATE       DATE,
    MODIFIED_BY        NUMBER(7,0),
    MODIFIED_DATE      DATE,
    CHECKED            VARCHAR2(1 BYTE) DEFAULT 'N',
    APPROVED_BY        NUMBER(7,0),
    APPROVED_DATE      DATE,
    APPROVED           VARCHAR2(1 BYTE) DEFAULT 'N',
    DELETED_FLAG       CHAR(1 BYTE)    
  );

  ALTER TABLE HRIS_EMPLOYEE_SERVICE_QA ADD CONSTRAINT PK_EMP_SERVICE_QA PRIMARY KEY(EMP_QA_ID);
  ALTER TABLE HRIS_EMPLOYEE_SERVICE_QA ADD CONSTRAINT FK_EMP_SRV_QA_SRV_QA_QA_ID FOREIGN KEY(QA_ID)
  REFERENCES HRIS_SERVICE_QA(QA_ID);
  ALTER TABLE HRIS_EMPLOYEE_SERVICE_QA ADD CONSTRAINT FK_EMP_SRV_QA_COM_COM_ID FOREIGN KEY(COMPANY_ID)
  REFERENCES HRIS_COMPANY(COMPANY_ID);
  ALTER TABLE HRIS_EMPLOYEE_SERVICE_QA ADD CONSTRAINT FK_EMP_SRV_QA_BRN_BRN_ID FOREIGN KEY(BRANCH_ID) REFERENCES HRIS_BRANCHES(BRANCH_ID);
  ALTER TABLE HRIS_EMPLOYEE_SERVICE_QA ADD CONSTRAINT FK_EMP_SRV_QA_EMP_EMP_ID FOREIGN KEY(EMPLOYEE_ID) REFERENCES HRIS_EMPLOYEES(EMPLOYEE_ID);
  ALTER TABLE HRIS_EMPLOYEE_SERVICE_QA ADD CONSTRAINT FK_EMP_SRV_QA_EMP_EMP_ID2 FOREIGN KEY(CREATED_BY) REFERENCES HRIS_EMPLOYEES(EMPLOYEE_ID);
  ALTER TABLE HRIS_EMPLOYEE_SERVICE_QA ADD CONSTRAINT FK_EMP_SRV_QA_EMP_EMP_ID3 FOREIGN KEY(MODIFIED_BY) REFERENCES HRIS_EMPLOYEES(EMPLOYEE_ID);
  ALTER TABLE HRIS_EMPLOYEE_SERVICE_QA ADD CONSTRAINT FK_EMP_SRV_QA_EMP_EMP_ID4 FOREIGN KEY(APPROVED_BY) REFERENCES HRIS_EMPLOYEES(EMPLOYEE_ID);
---  


CREATE TABLE HRIS_EMPLOYEE_HOLIDAY
  (
    EMPLOYEE_ID NUMBER(7,0) NOT NULL,
    HOLIDAY_ID  NUMBER(7,0) NOT NULL    
  ); 
  
  ALTER TABLE HRIS_EMPLOYEE_HOLIDAY
  ADD CONSTRAINT FK_EMP_HOLIDAY_EMP_EMP_ID FOREIGN KEY (EMPLOYEE_ID) REFERENCES HRIS_EMPLOYEES(EMPLOYEE_ID) ON
  DELETE CASCADE;
  
  ALTER TABLE HRIS_EMPLOYEE_HOLIDAY
  ADD CONSTRAINT FK_EMP_HOLI_HOLI_HOLI_ID FOREIGN KEY(HOLIDAY_ID) REFERENCES HRIS_HOLIDAY_MASTER_SETUP(HOLIDAY_ID) ON
  DELETE CASCADE;