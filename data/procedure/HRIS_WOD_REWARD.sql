create or replace PROCEDURE HRIS_WOD_REWARD
  (
    P_ID HRIS_EMPLOYEE_WORK_DAYOFF.ID%TYPE
  )
AS
  V_EMPLOYEE_ID HRIS_EMPLOYEE_WORK_DAYOFF.EMPLOYEE_ID%TYPE;
  V_WOH_FLAG HRIS_POSITIONS.WOH_FLAG%TYPE;
  V_FROM_DATE HRIS_EMPLOYEE_WORK_DAYOFF.FROM_DATE%TYPE;
  V_TO_DATE HRIS_EMPLOYEE_WORK_DAYOFF.TO_DATE%TYPE;
BEGIN
  SELECT EMPLOYEE_ID,
    TRUNC(FROM_DATE),
    TRUNC( TO_DATE)
  INTO V_EMPLOYEE_ID,
    V_FROM_DATE,
    V_TO_DATE
  FROM HRIS_EMPLOYEE_WORK_DAYOFF
  WHERE ID    = P_ID;
  IF(V_TO_DATE>TRUNC(SYSDATE)) THEN
    RETURN;
  END IF;
  --
  BEGIN
    SELECT P.WOH_FLAG
    INTO V_WOH_FLAG
    FROM HRIS_EMPLOYEES E
    JOIN HRIS_POSITIONS P
    ON (E.POSITION_ID   = P.POSITION_ID)
    WHERE E.EMPLOYEE_ID =V_EMPLOYEE_ID;
  EXCEPTION
  WHEN no_data_found THEN
    RAISE_APPLICATION_ERROR(-20000, 'Employee position not set.');
  END;
  --
DELETE FROM HRIS_EMPLOYEE_LEAVE_ADDITION WHERE WOD_ID=P_ID;
     DELETE FROM HRIS_OVERTIME_DETAIL WHERE WOD_ID= P_ID;
      DELETE FROM HRIS_OVERTIME WHERE WOD_ID = P_ID;
  IF V_WOH_FLAG ='L' THEN
    HRIS_WOD_LEAVE_ADDITION(P_ID);
  ELSIF V_WOH_FLAG ='O' THEN
    HRIS_WOD_OT_ADDITION(P_ID);
  END IF;
END;