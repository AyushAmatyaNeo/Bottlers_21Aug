ALTER TABLE HRIS_APPRAISAL_SETUP ADD
(
KPI_SETTING CHAR(1 BYTE) DEFAULT 'N' CHECK (KPI_SETTING IN('Y','N')) ,
COMPETENCIES_SETTING CHAR(1 BYTE) DEFAULT 'N' CHECK (COMPETENCIES_SETTING IN('Y','N'))
)

CREATE TABLE HRIS_APPRAISAL_KPI
  (
    SNO              NUMBER(7,0) NOT NULL,
    APPRAISAL_ID     NUMBER(7,0) NOT NULL,
    EMPLOYEE_ID      NUMBER(7,0) NOT NULL,
    TITLE            VARCHAR2(200 BYTE) NOT NULL,
    SUCCESS_CRITERIA VARCHAR2(4000 BYTE) NOT NULL,
    WEIGHT           NUMBER (5,2) NOT NULL,
    KEY_ACHIEVEMENT  VARCHAR2(4000 BYTE) DEFAULT NULL,
    SELF_RATING      NUMBER(7,0) DEFAULT NULL,
    APPRAISER_RATING NUMBER(7,0) DEFAULT NULL,
    REVIEWER_RATING  NUMBER(7,0) DEFAULT NULL,
    COMPANY_ID       NUMBER(7,0),
    BRANCH_ID        NUMBER(7,0) DEFAULT NULL,
    CREATED_BY       NUMBER(7,0),
    CREATED_DATE     DATE,
    MODIFIED_BY      NUMBER(7,0),
    MODIFIED_DATE    DATE,
    CHECKED          VARCHAR2(1 BYTE) DEFAULT 'N',
    APPROVED_BY      NUMBER(7,0),
    APPROVED_DATE    DATE,
    APPROVED         VARCHAR2(1 BYTE) DEFAULT 'N',
    STATUS           CHAR(1 BYTE) CHECK(STATUS IN('E','D')) 
  );
  
ALTER TABLE HRIS_APPRAISAL_KPI ADD CONSTRAINT PK_APPRAISAL_KPI PRIMARY KEY (SNO);
ALTER TABLE HRIS_APPRAISAL_KPI ADD CONSTRAINT FK_APPRAISAL_KPI_APP_APP_ID FOREIGN KEY (APPRAISAL_ID) REFERENCES HRIS_APPRAISAL_SETUP(APPRAISAL_ID);
ALTER TABLE HRIS_APPRAISAL_KPI ADD CONSTRAINT FK_APP_KPI_COM_COMPANY_ID FOREIGN KEY(COMPANY_ID) REFERENCES HRIS_COMPANY(COMPANY_ID);
ALTER TABLE HRIS_APPRAISAL_KPI ADD CONSTRAINT FK_APP_KPI_BRN_BRANCH_ID FOREIGN KEY(BRANCH_ID) REFERENCES HRIS_BRANCHES(BRANCH_ID);    
ALTER TABLE HRIS_APPRAISAL_KPI ADD CONSTRAINT FK_APP_KPI_EMP_EMPLOYEE_ID FOREIGN KEY(EMPLOYEE_ID) REFERENCES HRIS_EMPLOYEES(EMPLOYEE_ID);
ALTER TABLE HRIS_APPRAISAL_KPI ADD CONSTRAINT FK_APP_KPI_EMP_EMPLOYEE_ID1 FOREIGN KEY(CREATED_BY) REFERENCES HRIS_EMPLOYEES(EMPLOYEE_ID);
ALTER TABLE HRIS_APPRAISAL_KPI ADD CONSTRAINT FK_APP_KPI_EMP_EMPLOYEE_ID2 FOREIGN KEY(MODIFIED_BY) REFERENCES HRIS_EMPLOYEES(EMPLOYEE_ID);    
ALTER TABLE HRIS_APPRAISAL_KPI ADD CONSTRAINT FK_APP_KPI_EMP_EMPLOYEE_ID3 FOREIGN KEY(APPROVED_BY) REFERENCES HRIS_EMPLOYEES(EMPLOYEE_ID);


CREATE TABLE HRIS_APPRAISAL_DEFAULT
  (
    ID                  NUMBER(7,0) NOT NULL,
    MIN_VALUE           NUMBER(7,0) NOT NULL,
    MAX_VALUE           NUMBER(7,0) NOT NULL,
    APPRAISAL_TYPE_ID   NUMBER(7,0) NOT NULL,
    DESIGNATION_ID      NUMBER(7,0) NOT NULL,
    POSITION_ID         NUMBER(7,0) DEFAULT NULL,
    COMPANY_ID          NUMBER(7,0),
    BRANCH_ID           NUMBER(7,0) DEFAULT NULL,
    CREATED_BY          NUMBER(7,0),
    CREATED_DATE        DATE,
    MODIFIED_BY         NUMBER(7,0),
    MODIFIED_DATE       DATE,
    CHECKED             VARCHAR2(1 BYTE) DEFAULT 'N',
    APPROVED_BY         NUMBER(7,0),
    APPROVED_DATE       DATE,
    APPROVED            VARCHAR2(1 BYTE) DEFAULT 'N',
    STATUS              CHAR(1 BYTE) CHECK(STATUS IN('E','D'))
 );
ALTER TABLE HRIS_APPRAISAL_DEFAULT ADD CONSTRAINT PK_APPRAISAL_DEFAULT PRIMARY KEY (ID);
ALTER TABLE HRIS_APPRAISAL_DEFAULT ADD CONSTRAINT FK_APP_DFT_APP_TP_APP_TP_ID FOREIGN KEY (APPRAISAL_TYPE_ID) REFERENCES HRIS_APPRAISAL_TYPE(APPRAISAL_TYPE_ID);
ALTER TABLE HRIS_APPRAISAL_DEFAULT ADD CONSTRAINT FK_APP_DFT_COM_COMPANY_ID FOREIGN KEY(COMPANY_ID) REFERENCES HRIS_COMPANY(COMPANY_ID);
ALTER TABLE HRIS_APPRAISAL_DEFAULT ADD CONSTRAINT FK_APP_DFT_BRN_BRANCH_ID FOREIGN KEY(BRANCH_ID) REFERENCES HRIS_BRANCHES(BRANCH_ID);    
ALTER TABLE HRIS_APPRAISAL_DEFAULT ADD CONSTRAINT FK_APP_DFT_DES_DESIGNATION_ID FOREIGN KEY(DESIGNATION_ID) REFERENCES HRIS_DESIGNATIONS(DESIGNATION_ID);
ALTER TABLE HRIS_APPRAISAL_DEFAULT ADD CONSTRAINT FK_APP_DFT_POS_POSITION_ID FOREIGN KEY(POSITION_ID) REFERENCES HRIS_POSITIONS(POSITION_ID);    
ALTER TABLE HRIS_APPRAISAL_DEFAULT ADD CONSTRAINT FK_APP_DFT_EMP_EMPLOYEE_ID1 FOREIGN KEY(CREATED_BY) REFERENCES HRIS_EMPLOYEES(EMPLOYEE_ID);
ALTER TABLE HRIS_APPRAISAL_DEFAULT ADD CONSTRAINT FK_APP_DFT_EMP_EMPLOYEE_ID2 FOREIGN KEY(MODIFIED_BY) REFERENCES HRIS_EMPLOYEES(EMPLOYEE_ID);    
ALTER TABLE HRIS_APPRAISAL_DEFAULT ADD CONSTRAINT FK_APP_DFT_EMP_EMPLOYEE_ID3 FOREIGN KEY(APPROVED_BY) REFERENCES HRIS_EMPLOYEES(EMPLOYEE_ID);
ALTER TABLE HRIS_NEWS MODIFY COMPANY_ID NUMBER(7,0) NULL;
