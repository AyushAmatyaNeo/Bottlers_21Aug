CREATE TABLE HRIS_APPRAISAL_STATUS
  (
    STATUS_ID    NUMBER(7,0) NOT NULL,
    EMPLOYEE_ID  NUMBER(7,0) NOT NULL,
    APPRAISAL_ID NUMBER(7,0) NOT NULL,
    ANNUAL_RATING_KPI FLOAT,
    ANNUAL_RATING_COMPETENCY VARCHAR2(400 BYTE),
    APPRAISER_OVERALL_RATING VARCHAR2(400 BYTE),
    REVIEWER_AGREE           CHAR(1 BYTE) CHECK(REVIEWER_AGREE  IN('Y','N')),
    APPRAISEE_AGREE          CHAR(1 BYTE) CHECK(APPRAISEE_AGREE IN('Y','N')),
    APPRAISED_BY             NUMBER(7,0),
    REVIEWED_BY              NUMBER(7,0),
    CREATED_BY               NUMBER(7,0),
    CREATED_DATE             DATE DEFAULT SYSDATE NOT NULL,
    MODIFIED_BY              NUMBER(7,0),
    MODIFIED_DATE            NUMBER(7,0)
  );
ALTER TABLE HRIS_APPRAISAL_STATUS ADD CONSTRAINT PK_APPRAISAL_STATUS_STATUS_ID PRIMARY KEY(STATUS_ID);
ALTER TABLE HRIS_APPRAISAL_STATUS ADD CONSTRAINT FK_APP_STATUS_EMP_EMP_ID FOREIGN KEY (EMPLOYEE_ID) REFERENCES HRIS_EMPLOYEES(EMPLOYEE_ID);
ALTER TABLE HRIS_APPRAISAL_STATUS ADD CONSTRAINT FK_APP_STATUS_EMP_EMP_ID1 FOREIGN KEY (CREATED_BY) REFERENCES HRIS_EMPLOYEES(EMPLOYEE_ID);
ALTER TABLE HRIS_APPRAISAL_STATUS ADD CONSTRAINT FK_APP_STATUS_EMP_EMP_ID2 FOREIGN KEY (MODIFIED_BY) REFERENCES HRIS_EMPLOYEES(EMPLOYEE_ID);
ALTER TABLE HRIS_APPRAISAL_STATUS ADD CONSTRAINT FK_APP_STATUS_EMP_EMP_ID3 FOREIGN KEY (REVIEWED_BY) REFERENCES HRIS_EMPLOYEES(EMPLOYEE_ID);
ALTER TABLE HRIS_APPRAISAL_STATUS ADD CONSTRAINT FK_APP_STATUS_EMP_EMP_ID4 FOREIGN KEY (APPRAISED_BY) REFERENCES HRIS_EMPLOYEES(EMPLOYEE_ID);
ALTER TABLE HRIS_APPRAISAL_STATUS ADD CONSTRAINT FK_APP_STATUS_APP_APP_ID FOREIGN KEY (APPRAISAL_ID) REFERENCES HRIS_APPRAISAL_SETUP(APPRAISAL_ID); 

ALTER TABLE HRIS_APPRAISAL_ASSIGN DROP (ANNUAL_RATING_KPI,ANNUAL_RATING_COMPETENCY,APPRAISER_OVERALL_RATING);

ALTER TABLE HRIS_APPRAISAL_STATUS DROP COLUMN STATUS_ID;
ALTER TABLE HRIS_APPRAISAL_STATUS ADD CONSTRAINT PK_APPRAISAL_STATUS PRIMARY KEY (EMPLOYEE_ID,APPRAISAL_ID);

create or replace TRIGGER APPRAISAL_STATUS_TRIGGER AFTER
  INSERT ON HRIS_APPRAISAL_ASSIGN FOR EACH ROW 
  BEGIN
    INSERT INTO HRIS_APPRAISAL_STATUS(EMPLOYEE_ID,APPRAISAL_ID) VALUES(:new.EMPLOYEE_ID,:new.APPRAISAL_ID);  
  END;