<?php
/**
 * Load Javascript files here
 */
$this->headScript()
        ->appendFile($this->basePath('telerik_kendoui/js/kendo.all.min.js'))
        ->appendFile($this->basePath('js/HolidayManagement/HolidaySetup/add.js'))
        ->appendFile($this->basePath('js/angular.min.js'))
        ->appendFile($this->basePath('js/HolidayManagement/HolidaySetup/holidayListController.js'));
?>

<?php
if ($this->messages) { ?>
    <script>
        document.messages =<?php echo json_encode($this->messages); ?>
    </script>
<?php } ?>

<script>
    document.menu =<?php $menu = ["id" => "menuHolidays", "subMenu" => ["id" => "subMenuHolidaySetup"]];echo json_encode($menu);?>;
    document.url ="<?= $this->url('restful',['action','index']); ?>";
</script>
<div class="page-bar">
    <?= $this->navigation('Zend\Navigation\holidaysetup')->breadcrumbs()->setMinDepth(0)->setPartial('partial/breadcrumb') ?>
</div>
<div ng-app="hris" ng-controller="holidayListController">
    <div class="margin-top-20">
        <div class="row" style="position: relative;">
            <div class="col-sm-2">
                <label>From Date</label>
                <div class="input-group date" id="startDate">
                    <input type="text" placeholder="From Date" name="startDate" ng-model="startDate" id="startDate1"
                           class="form-control"/>
                    <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                </div>
            </div>
            <div class="col-sm-2">
                <label>To Date</label>
                <div class="input-group date" id="endDate">
                    <input type="text" placeholder="To Date" name="endDate" ng-model="endDate" id="endDate1"
                           class="form-control"/>
                    <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                </div>
            </div>
            <div class="col-sm-2">
                <?php print $this->formLabel($branches); ?>
                <?php print $this->formElement($branches); ?>
            </div>
            <div class="col-sm-2">
                <?php print $this->formLabel($genders); ?>
                <?php print $this->formElement($genders); ?>
            </div>
            <div class="col-sm-4" style="position: absolute; bottom:0; right: 0;" >
                <div class="row">
                    <div class="col-sm-6">
                        <button ng-click="view()" id="viewHolidays" class="btn btn-sm yellow form-control">
                            View
                            <i class="fa fa-search"></i>
                        </button>
                    </div>
                    <div class="col-sm-6">
                        <div class="btn-group">
                            <a href="<?= $this->url('holidaysetup', ['action' => 'add']) ?>" id="sample_editable_1_new"
                               class="btn green"> Add New
                                <i class="fa fa-plus"></i>
                            </a>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
    
    <div class="margin-top-20">
        <div id="holidayTable"></div>
    </div>
    
    <script id="rowTemplate" type="text/x-kendo-tmpl">
        <tr>
        <td>    
        #: (HOLIDAY_CODE == null) ? '-' : HOLIDAY_CODE #
        </td>
        <td>
        #: (HOLIDAY_ENAME == null) ? '-' : HOLIDAY_ENAME #
        </td>
        <td>
        #: (START_DATE == null) ? '-' : START_DATE #
        </td>
        <td>
        #: (END_DATE == null) ? '-' : END_DATE #
        </td>
        <td>
        #: (GENDER_NAME == null) ? '-' : GENDER_NAME #
        </td>
        <td>
            <ul id="branchList">  
                # (BRANCHES.length >3) ? ln=3 : ln=BRANCHES.length #
                #for(var i=0; i<ln; i++) { #
                    <li>
                    - #=BRANCHES[i].BRANCH_NAME #
                    </li>
                #}#
                <li>              
                # if (BRANCHES.length >3) { #
                <a href="<?= $this->url("holidaysetup", ["action" => "edit"]) ?>/#:HOLIDAY_ID#" style="margin-left:8px;"> (View More)
                </a>
                # } #
                </li>
            </ul>
        </td>
        <td>
        #: (HALFDAY == null) ? '-' : HALFDAY #
        </td>
        <td>
        <a href="<?= $this->url("holidaysetup", ["action" => "edit"]) ?>/#:HOLIDAY_ID#"> Edit
        </a>
        </tr>
    </script>
    
    
</div>